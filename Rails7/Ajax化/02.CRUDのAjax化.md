1、ビューファイルでajax化させたい箇所を指定
# ビューファイル
```
# 通常のビューでの使用
# 特定の部分をAjaxで部分更新するためのフレーム
<%= turbo_frame_tag "frame_id" do %>
  <!-- ajax化させたいコンテンツ -->
<% end %>
```
主に使われるアクション:  
・index: ページ全体を更新する代わりに、リストやテーブルの一部を更新する場合。  
・new: モーダルウィンドウや特定の部分に新規作成フォームを表示する場合。  
・edit: ページの一部に編集フォームを表示する場合。  
```
# 部分テンプレートでの使用
# モデルに基づいてユニークなIDを持つAjax更新用フレーム
<%= turbo_frame_tag "frame_id" do %>
  <!-- ajax化させたいコンテンツ -->
<% end %>
```
主に使われるアクション:  
・show: 特定のリソースの詳細を表示する部分を更新する場合。  
・create: 新しく作成されたリソースをリストや他の部分に追加する場合。  
・update: 特定のリソースの情報を更新する場合。インライン編集や部分的な情報の更新に便利。  
・destroy: 特定のリソースをリストやページから削除する場合。  

2、コントローラーにturbo_streamの記述を追加し、アクションに対応する.turbo_stream.erbを呼び出せるようにする  
※基本的にcreate、show、update、destroyの4つのアクションをajax化させることが多い。index、new、editアクションをAjax化させたい場合の例は最下部に記述。
# 基本構文
```
respond_to do |format|
  format.turbo_stream
  format.html
end
```
基本のアクション例  
indexアクション
```
def index
  @models = Model.all
  respond_to do |format|
    format.turbo_stream
    format.html
  end
end
```
showアクション
```
def show
  @model = Model.find(params[:id])
  respond_to do |format|
    format.turbo_stream
    format.html
  end
end
```
editアクション
```
def edit
  @model = Model.find(params[:id])
  respond_to do |format|
    format.turbo_stream
    format.html
  end
end
```
createアクションの例
```
def create
  @model = Model.new(model_params)
  if @model.save
    respond_to do |format|
      format.turbo_stream
      format.html { redirect_to @model }
    end
  else
    render :new
  end
end
```
updateアクション
```
def update
  @model = Model.find(params[:id])
  if @model.update(model_params)
    respond_to do |format|
      format.turbo_stream
      format.html { redirect_to @model }
    end
  else
    render :edit
  end
end
```
destroyアクション
```
def destroy
  @model = Model.find(params[:id])
  @model.destroy
  respond_to do |format|
    format.turbo_stream
    format.html { redirect_to models_url }
  end
end
```
3、各アクションに対応する.turbo_stream.erbをviewディレクトリに作成し、対象のframe_id内のhtmlをどのように更新するかコーディングする
1. index.turbo_stream.erb
indexアクションが呼ばれたときにリストを更新するテンプレート。
```
<%= turbo_stream.replace "models" do %>
  <%= render @models %>
<% end %>
```
2. show.turbo_stream.erb
```
<%= turbo_stream.replace "model_details" do %>
  <%= render @model %>
<% end %>
```
3. edit.turbo_stream.erb
```
<%= turbo_stream.replace "edit_model" do %>
  <%= render "form", model: @model %>
<% end %>
```
4. create.turbo_stream.erb
```
<%= turbo_stream.append "models" do %>
  <%= render @model %>
<% end %>
```
5. update.turbo_stream.erb
```
<%= turbo_stream.replace dom_id(@model) do %>
  <%= render @model %>
<% end %>
```
6. destroy.turbo_stream.erb
```
<%= turbo_stream.remove dom_id(@model) %>
```
___
※index、new、editアクションをAjax化させたい場合  
1. indexアクションのAjax化  
⓵無限スクロール:  
・大量のデータをページネーションで表示する代わりに、ユーザーがスクロールするたびに新しいデータを自動的に読み込む場合。  
・新しいデータを追加していくため、部分的に更新する必要があります。  
⓶動的なフィルタリングと検索:  
・ユーザーがフィルター条件を変更するたびに、結果がリアルタイムで更新される場合。  
・フィルターや検索条件に基づいて、部分的にリストを更新します。  
```
def index
  @models = Model.where(filter_params)
  respond_to do |format|
    format.turbo_stream
    format.html
  end
end
```
2. newアクションのAjax化  
⓵モーダルウィンドウでのフォーム表示:  
・新規作成フォームをモーダルウィンドウ（ポップアップ）で表示する場合。  
・モーダルウィンドウ内に部分的にフォームを表示します。  
⓶ステップ形式のフォーム:  
・長いフォームをステップごとに分けて表示する場合。  
・ステップごとのフォームを動的に読み込んで表示します。  
```
def new
  @model = Model.new
  respond_to do |format|
    format.turbo_stream
    format.html
  end
end
```
3. editアクションのAjax化  
⓵インライン編集:  
・テーブルやリスト内の項目をその場で編集する場合。  
・編集フォームを部分的に表示して、編集後に元の表示に戻します。  
⓶モーダルウィンドウでの編集フォーム表示:  
・編集フォームをモーダルウィンドウで表示する場合。  
・モーダルウィンドウ内に部分的にフォームを表示します。  
```
def edit
  @model = Model.find(params[:id])
  respond_to do |format|
    format.turbo_stream
    format.html
  end
end
```
まとめ  
index: 無限スクロールや動的フィルタリングと検索の場合にAjax化が有効です。  
new: モーダルウィンドウでのフォーム表示やステップ形式のフォームでの使用が考えられます。  
edit: インライン編集やモーダルウィンドウでの編集フォーム表示でAjax化が有効です。  
